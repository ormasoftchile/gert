# DNS resolves + HTTP 200 â†’ full green path
commands:
  # dns-check child: nslookup succeeds
  - argv: ["nslookup", "github.com"]
    stdout: |
      Server:  resolver1.example.com
      Address:  10.0.0.1

      Name:    github.com
      Address:  140.82.112.3
    stderr: ""
    exit_code: 0

  # Parent: curl HEAD returns 200 headers
  - argv: ["curl", "-s", "-I", "https://github.com"]
    stdout: "HTTP/2 200\r\ncontent-type: text/html\r\n"
    stderr: ""
    exit_code: 0

evidence:
  # Child step: DRI confirms DNS resolved
  check_resolution:
    dns_resolved:
      kind: text
      value: "yes"
