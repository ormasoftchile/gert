apiVersion: tool/v0

meta:
  name: kubectl
  version: "1.0"
  description: Kubernetes command-line tool
  binary: kubectl

transport:
  mode: stdio

governance:
  read_only: true
  redact:
    - pattern: "Bearer [A-Za-z0-9+/=]+"
      replace: "Bearer [REDACTED]"

actions:
  get-pods:
    description: List pods in a namespace
    argv: ["get", "pods", "-n", "{{ .namespace }}", "-o", "json"]
    args:
      namespace:
        type: string
        required: true
        description: Kubernetes namespace
      selector:
        type: string
        required: false
        default: ""
        description: Label selector
    capture:
      stdout:
        format: json
    governance:
      read_only: true

  delete-pod:
    description: Delete a specific pod (destructive)
    argv: ["delete", "pod", "{{ .pod_name }}", "-n", "{{ .namespace }}"]
    args:
      pod_name:
        type: string
        required: true
      namespace:
        type: string
        required: true
    governance:
      read_only: false
      requires_approval: true
      approval_min: 1
